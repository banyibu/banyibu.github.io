<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>C++学习笔记第四章章_表达式 | 致良知，事上练</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="概述表达式的基础内容、各种运算符及类型转化相关问题。">
<meta name="keywords" content="计算机语言,C++">
<meta property="og:type" content="article">
<meta property="og:title" content="C++学习笔记第四章章_表达式">
<meta property="og:url" content="http://banyibu.com/2018/08/13/C-学习笔记第四章章-表达式/index.html">
<meta property="og:site_name" content="致良知，事上练">
<meta property="og:description" content="概述表达式的基础内容、各种运算符及类型转化相关问题。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-08-14T08:05:36.665Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="C++学习笔记第四章章_表达式">
<meta name="twitter:description" content="概述表达式的基础内容、各种运算符及类型转化相关问题。">
  
    <link rel="alternate" href="/atom.xml" title="致良知，事上练" type="application/atom+xml">
  
  
    <link rel="icon" href="images/1260.gif">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/plugin/bganimation/bg.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://upload-images.jianshu.io/upload_images/12985001-ffd8bc90edb9f3e9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
    <h2 class="author">般一不</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>25</strong><br>文章</div></a>
      <a href="/categories"><div><strong>19</strong><br>分类</div></a>
      <a href="/tags"><div><strong>20</strong><br>标签</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
          <a href="/about" title="About">
            <li>关于</li>
          </a>
        
          <a href="/sponsor" title="Sponsor">
            <li>投喂</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main"><article id="post-C-学习笔记第四章章-表达式" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/13/C-学习笔记第四章章-表达式/" class="article-date">
  <time class="post-time" datetime="2018-08-13T13:03:56.000Z" itemprop="datePublished">
    <span class="post-month">8月</span><br/>
    <span class="post-day">13</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      C++学习笔记第四章章_表达式
    </h1>
  

        <div>
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/计算机基础/">计算机基础</a>,<a class="article-category-link" href="/categories/计算机基础/计算机语言/">计算机语言</a>,<a class="article-category-link" href="/categories/计算机基础/计算机语言/C-Primer/">C++ Primer</a>
  </div>

          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>表达式的基础内容、各种运算符及类型转化相关问题。<br><a id="more"></a></p>
<h3 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h3><p>表达式由一个或多个运算对象组成，对表达式求值将得到一个结果。把运算符和一个或多个运算对象组合起来可以构成复杂的表达式。<br>运算符的结合律、优先级、求值顺序，运算过程中对象的类型转化、提升。<br>重载运算符；<br>左值和右值：当一个对象被用作右值的时候，用的事对象的值（内容）；当一个对象被用作左值的时候，用的是对象的身份（在内存中的位置）。<br>在需要右值的地方可以用左值代替，但不能把右值当做左值使用。<br>使用关键字decltype的时候，若参数是左值，则返回一个引用类型，右值则返回右值对应的类型。<br>若decltype的参数是一个表达式，表达式计算结果为左值，则decltype返回一个对应左值的引用；若其参数是一个变量，则返回变量的类型。<br><strong>求值顺序</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int i=0;</span><br><span class="line">cout&lt;&lt;i&lt;&lt;&quot; &quot;&lt;&lt;++i&lt;&lt;endl; //未定义，可能的输出结果1 1,0 1……</span><br></pre></td></tr></table></figure></p>
<p>规定了求值顺序的运算符：&amp;&amp; || ?: , ;<br>运算对象的求值顺序与优先级和结合律无关。<br><em>处理复合表达式两条经验准则：</em><br>1）用户括号强制让表达式的组合关系更符合逻辑要求；<br>2）如果改变了某个运算对象的值，在表达式的其他位置不要再使用这个运算对象。当改变运算对象的子表达式本身就是另外一个子表达式的运算对象时，该规则无效。<br><strong>算术运算符</strong><br>优先级：+-、*/%、+-；<br>算数运算符的运算对象和求值结果都是右值。<br>取余m%n的结果符号位和m保持一致。<br><strong>逻辑和关系运算符</strong><br>优先级：!、&lt; &lt;= &gt; &gt;=、==、!=、&amp;&amp;、||；<br>逻辑&amp;&amp;和||，短路求值；<br>进行比较运算时，除非比较的对象时布尔类型，否则不要使用布尔字面值true或false作为运算对象：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(val==true)&#123;&#125; //只有当val等于1时条件才为真；</span><br><span class="line">//上述语句会被转化为下列语句：</span><br><span class="line">if(val==1)&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>赋值运算符</strong><br>使用列表初始化，即{}初始化时，{}中的元素的宽度不应该大于目标类型的空间，否则编译器报错且不会进行类型转化。<br>赋值运算符满足右结合律；<br>赋值运算符优先级低于关系运算符的优先级，在条件语句中，赋值部分通常加上括号。<br>复合赋值运算符：+=、-=、*=、/=、%=；&lt;&lt;=、&gt;&gt;=、&amp;=、^=、|= ，复合赋值，对左侧对象少求值一次。<br><strong>递增递减运算符</strong><br>递增递减前置版本直接返回修改后的对象，而后置版本需要先将未修改的对象保存下来，递增递减完成后，返回修改后的对象。<br><strong>成员访问运算符</strong><br>. -&gt;<br>箭头运算符作用于一个指针类型的运算对象，结果是一个左值。点运算符分两种情况：如果成员所属的对象时左值，那么结果是左值；反之，如果成员所属对象时右值，返回右值。<br><strong>条件运算符</strong><br>cond ? expr1 : expr2;<br>当expr1和expr2都是左值，或者都能转化成同一种左值时，运算结果是左值，否则，运算结果是右值。<br>条件运算符允许嵌套，满足右结合。<br>条件运算符优先级特别低，当其在输出表达式中时，应该使用括号。<br><strong>位运算符</strong><br>位运算符作用于整数类型的运算对象。<br>优先级：`, &lt;&lt; &gt;&gt;, &amp;, ^ |<br>如果位运算符对象是小整型，则运算时会提升为大整型，若运算对象是带符号的负值，则其“符号位”的处理依赖于机器。而且左移操作可能会改变符号位的值，这是一种未定义的行为。<br>建议：仅将位运算用于处理无符号类型。<br>&lt;&lt; &gt;&gt;的内置含有是移位操作，而输入输出则是对其的一种重载。<br>其左侧对象作为根据右侧指定位数移位操作，并将左侧对象的拷贝作为求值结果。右侧对象一定要非负且小于结果的位数。<br>&lt;&lt; 在右侧插入值为0的二进制位。&gt;&gt;依赖于其左侧的运算对象的类型，如果为无符号类型，则插入值为0的二进制位；如果带符号，则复制符号位或插入值为0的二进制位，是具体环境而定。<br>移位操作满足左结合律；<br><strong>sizeof运算符</strong><br>sizeof运算符返回一条表达式或一个类型名字所占的字节数。其满足右结合律，所得结果是一个size_t类型的常量表达式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sizeof(type); //sizeof(int)求类型</span><br><span class="line">sizeof expr; //sizeof i;求表达式</span><br></pre></td></tr></table></figure></p>
<p>注意：<br>1）sizeof不会吧数组名转化为指针计算，对数组的计算返回的数组中所有元素所占空间的大小之和。<br>2）sizeof允许使用作用域运算符，获取类成员的大小；<br>3）对string或vector对象执行sizeof运算，只返回该类固定部分的大小，不会计算对象中的元素占用了多少空间。<strong><em>疑问</em></strong><br><strong>逗号运算符</strong><br>从左到右计算，最终结果是最右侧对象的值，若最右侧运算对象是左值，则其计算结果也是左值。</p>
<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><p>隐式转换发生的情况：<br>1）在大多数表达式中，比int类型小的整型首先会提升为较大的整型类型；<br>2）在条件中，非布尔转换为布尔；<br>3）初始化时，初始值转化为变量的类型；赋值中，右侧值转化为左侧对象的类型；<br>4）如果算数运算或关系运算对象有多种类型，需要转换成同一种类型；<br>5）函数调用时也会发生类型转换；<br><strong>算术转换</strong><br>运算符的运算对象将转换为最宽的类型、浮点型和整数将转换成浮点类型<br>整型提升<br>如果某个运算符的运算对象类型不一致，这些运算符对象将转化为同一类型，但是如果某个运算对象的符号是无符号类型，那么转换结果就依赖于机器中各个整数类型的相对大小了：<br>1）首先执行整型提升，若提升的结果类型匹配，无需进一步转换；<br>2）如果一个运算对象无符号，另一个带符号，而且其中的无符号类型不小于带符号类型，那么带符号类型转化为无符号类型：注意这里可能将带符号负数错误转换；<br>3）如果无符号类型的所有值都能够存储在另一个带符号类型中，则无符号类型的运算对象转换成带符号类型。否则，带符号类型转化为无符号类型；<br><strong>其他隐式类型转换</strong><br>数组转换为指针：除了作为decltype、取地址&amp;、sizeof及typeid等运算符的运算对象时，上述类型不会发生。同样用一个引用来初始化数组时这种转换也不会发生；<br>指针的转换：常量整数0和nullptr转换成任意指针；指向任意非常量的指针能转换成void<em>；指向任意对象的指针能转换成const void</em>；<br>转换成布尔类型：若值为0转化为false，否则转化为true；<br>转换成常量：指向非常量类型的指针或引用可以转化为其对应的常量类型；<br>类类型定义的转换：例如，输入流cin向布尔的转换、C风格字符串向string转换等；</p>
<h3 id="显示转换"><a href="#显示转换" class="headerlink" title="显示转换"></a>显示转换</h3><p>虽然有时候不得不用强制类型转换，但这种方法是很危险的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cast-name&lt;type&gt;(expression);</span><br></pre></td></tr></table></figure></p>
<p>其中，cast-name是static_cast、dynamic_cast、const_cast和 reinterpret_cast中的一种。cast-name指定了执行那种类型转化。<br>static_cast：任何具有明确定义的类型转化，只要不包含底层const，都可以使用。可以通过static_cast找回void中的值。<br>const_cast：只能改变运算对象的底层const。这样我们就可以通过该转换，获得对变量写的权利，而这种写不再收到编译器报错，但是其合法性却是未定的；<br>只有const_cast可以改变表达式的常量属性，但是也不能用const_cast改变表达式的类型。<br>reinterpret_cast：通常为运算对象的位模式提供较低层次上的重新解释，即将运算对象的内容解释成另一种类型。<br>reinterpret_cast本质上依赖于机器。要想安全的使用它，必须对涉及到的类型和编译器实现转换的过程非常了解。<br>dynamic_cast：支持运行时类型识别；<br>注意：谨慎使用强制类型转换，尤其是reinterpret_cast。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://banyibu.com/2018/08/13/C-学习笔记第四章章-表达式/" data-id="cjkzgks7v000k6ov76t69hgkw" class="article-share-link">分享</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/计算机语言/">计算机语言</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/08/14/C-学习笔记第五章-语句/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          C++学习笔记第五章_语句
        
      </div>
    </a>
  
  
    <a href="/2018/08/12/C-学习笔记第三章-字符串、向量和数组/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">C++学习笔记第三章_字符串、向量和数组</div>
    </a>
  
</nav>

  
</article>






  <div id="comments" class="comments">
  	<div id="uyan_frame"></div>
  </div>
	<section class="livere" id="comments">
<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC8zNzc5NS8xNDMyNg==">
<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
</script>
<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->
</section>
	


</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">致良知，事上练</h1>
    <h2 class="blog-subtitle">偏爱精神世界的更新换代，日日思之，日日求突破。</h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
          <a href="/about" title="About">
            <li>关于</li>
          </a>
        
          <a href="/sponsor" title="Sponsor">
            <li>投喂</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://upload-images.jianshu.io/upload_images/12985001-ffd8bc90edb9f3e9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
    <h2 class="author">般一不</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>25</strong><br>文章</div></a>
      <a href="/categories"><div><strong>19</strong><br>分类</div></a>
      <a href="/tags"><div><strong>20</strong><br>标签</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="http://github.com/banyibu" target="_blank" title="Github">
          Github
        </a>
      
    </div>

    <div class="friend-link">
      <h2>友情链接</h2>
      
        <a class="hvr-bounce-in" href="https://dadavision.cn" target="_blank" title="Dadavision">
          Dadavision
        </a>
      
        <a class="hvr-bounce-in" href="https://www.resultlv.com" target="_blank" title="Rwsultlv">
          Rwsultlv
        </a>
      
    </div>
  </div>
</div>



  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2017 - 2018 般一不<br>
      由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动 | 
      主题-<a href="https://github.com/ShanaMaid/hexo-theme-shana">Ban Yibu</a>
      
    </div>
    
  </div>
</footer>
    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  <link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">
  <script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>



  <link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">
  <script src="/plugin/galmenu/GalMenu.js"></script>
  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title="" class="menuItem">首页</a>
          
            <a href="/tags" title="" class="menuItem">标签</a>
          
            <a href="/categories" title="" class="menuItem">分类</a>
          
            <a href="/archives" title="" class="menuItem">归档</a>
          
            <a href="/about" title="" class="menuItem">关于</a>
          
            <a href="/sponsor" title="" class="menuItem">打赏</a>
          
        </div>
        
          <audio id="audio" src="#"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>苟利</span></li> 
    <li><span>国家</span></li> 
    <li><span>生死以</span></li> 
    <li><span>岂能</span></li> 
    <li><span>祸福</span></li> 
    <li><span>趋避之</span></li> 
  </ul>
</section>
<script src="/js/script.js"></script>



  </div>
</body>
</html>